import{d as b,a as y,r as E,g as m,w as t,o as d,e as o,f as V,u as h,h as k,i as x}from"./index-b6819a4c.js";import{u as I,a as q,b as F,E as B,v as C}from"./http-a6b1075d.js";import{a as N,E as P}from"./el-form-item-784222e1.js";const D=b({__name:"login",setup(M){const p=x(),e=y({email:"yeshaojun5056@163.com",password:"qq5056"}),{isFetching:c,data:u,execute:_}=I("user/login",{immediate:!1}).post(e),i=E();function f(){var l;(l=i.value)==null||l.validate(async a=>{var s;a&&(await _(),u.value&&(localStorage.setItem("token",(s=JSON.parse(u.value))==null?void 0:s.token),q.success("登录成功"),p.push("/")))})}return(l,a)=>{const s=F,r=P,g=B,w=N,v=C;return d(),m(w,{ref_key:"formInstace",ref:i,model:e,"label-width":"120px"},{default:t(()=>[o(r,{prop:"email",label:"Email",rules:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}]},{default:t(()=>[o(s,{modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=n=>e.email=n)},null,8,["modelValue"])]),_:1}),o(r,{prop:"password",label:"password",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:t(()=>[o(s,{type:"password",modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=n=>e.password=n)},null,8,["modelValue"])]),_:1}),o(r,null,{default:t(()=>[V((d(),m(g,{type:"primary",onClick:f},{default:t(()=>[k("登录")]),_:1})),[[v,h(c)]])]),_:1})]),_:1},8,["model"])}}});export{D as default};
