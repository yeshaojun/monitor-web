import{j as S,k as q,d as b,l as L,m as F,o as u,c as y,g as p,w as r,n as M,u as k,p as U,q as m,s as h,t as V,_ as D,v as O,r as w,a as T,b as c,e as n,f as R,h as E,x,i as j,E as C}from"./index-b8a42ca2.js";import{u as I,a as z,E as A,v as J}from"./http-4b2ed7f4.js";import{a as K,E as G}from"./el-form-item-2b6db19c.js";const H=S({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:q}}),Q={click:f=>f instanceof MouseEvent},W=["href"],X=b({name:"ElLink"}),Y=b({...X,props:H,emits:Q,setup(f,{emit:v}){const o=f,e=L("link"),l=F(()=>[e.b(),e.m(o.type),e.is("disabled",o.disabled),e.is("underline",o.underline&&!o.disabled)]);function _(s){o.disabled||v("click",s)}return(s,g)=>(u(),y("a",{class:h(k(l)),href:s.disabled||!s.href?void 0:s.href,onClick:_},[s.icon?(u(),p(k(U),{key:0},{default:r(()=>[(u(),p(M(s.icon)))]),_:1})):m("v-if",!0),s.$slots.default?(u(),y("span",{key:1,class:h(k(e).e("inner"))},[V(s.$slots,"default")],2)):m("v-if",!0),s.$slots.icon?V(s.$slots,"icon",{key:2}):m("v-if",!0)],10,W))}});var Z=D(Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const ee=O(Z);const se="/assets/login-5128a910.png",ae={class:"wrapper"},le={class:"flex bg-white login-wrapper shadow-lg"},te=c("img",{src:se,alt:""},null,-1),oe={class:"flex-1 p-20"},ne=c("h3",{class:"text-5xl mb-5 text-center font-semibold font-primary"},"MONITOR",-1),re=c("p",{class:"text-2xl mb-20 text-center text-gray-400"}," A universal front-end monitoring system ",-1),pe=b({__name:"login",setup(f){const v=j(),o=w(!1),e=T({email:"",password:"",nickname:"",password1:""}),l=w("login"),_=w();async function s(){var g;(g=_.value)==null||g.validate(async a=>{var d;if(a)if(l.value==="login"){o.value=!0;const{data:t}=await I("user/login").post({email:e.email,password:e.password});o.value=!1,t.value&&(localStorage.setItem("token",(d=JSON.parse(t.value))==null?void 0:d.token),C.success("登录成功"),v.push("/"))}else{const{error:t}=await I("user/register").post({email:e.email,password:e.password,nickname:e.nickname,password1:e.password,password2:e.password1});t||(C.success("注册成功！"),l.value="login")}})}return(g,a)=>{const d=z,t=G,P=A,B=ee,N=K,$=J;return u(),y("div",ae,[c("div",le,[te,c("div",oe,[ne,re,n(N,{ref_key:"formInstace",ref:_,model:e,"label-position":"left","label-width":"120px"},{default:r(()=>[l.value==="register"?(u(),p(t,{key:0,prop:"nickname",label:"昵称",rules:[{required:!0,message:"Please input email address",trigger:"blur"}]},{default:r(()=>[n(d,{modelValue:e.nickname,"onUpdate:modelValue":a[0]||(a[0]=i=>e.nickname=i)},null,8,["modelValue"])]),_:1})):m("",!0),n(t,{prop:"email",label:"邮箱",rules:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}]},{default:r(()=>[n(d,{modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=i=>e.email=i)},null,8,["modelValue"])]),_:1}),n(t,{prop:"password",label:"密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:r(()=>[n(d,{type:"password",modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=i=>e.password=i)},null,8,["modelValue"])]),_:1}),l.value==="register"?(u(),p(t,{key:1,prop:"password1",label:"确认密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:r(()=>[n(d,{type:"password",modelValue:e.password1,"onUpdate:modelValue":a[3]||(a[3]=i=>e.password1=i)},null,8,["modelValue"])]),_:1})):m("",!0),n(t,null,{default:r(()=>[R((u(),p(P,{type:"primary",onClick:s},{default:r(()=>[E(x(l.value==="register"?"注册":"登录"),1)]),_:1})),[[$,o.value]]),n(B,{class:"ml-5",type:"info",onClick:a[4]||(a[4]=i=>l.value==="register"?l.value="login":l.value="register")},{default:r(()=>[E(x(l.value==="register"?"去登录":"免费注册"),1)]),_:1})]),_:1})]),_:1},8,["model"])])])])}}});export{pe as default};
