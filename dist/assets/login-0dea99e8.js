import{b as $,H as q,d as V,u as L,c as D,A as u,s as h,z as p,v as r,I as F,y as w,J as M,C as c,K as E,r as I,_ as O,p as U,a as y,q as J,t as m,l as n,x as T,m as C,G as x,D as z,E as N}from"./index-1e5f4991.js";import{u as b,a as A,E as K,v as R}from"./http-90f716c9.js";import{a as j,E as G}from"./el-form-item-891bb7bb.js";const H=$({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:q}}),Q={click:f=>f instanceof MouseEvent},W=["href"],X=V({name:"ElLink"}),Y=V({...X,props:H,emits:Q,setup(f,{emit:v}){const o=f,e=L("link"),l=D(()=>[e.b(),e.m(o.type),e.is("disabled",o.disabled),e.is("underline",o.underline&&!o.disabled)]);function g(s){o.disabled||v("click",s)}return(s,_)=>(u(),h("a",{class:E(w(l)),href:s.disabled||!s.href?void 0:s.href,onClick:g},[s.icon?(u(),p(w(M),{key:0},{default:r(()=>[(u(),p(F(s.icon)))]),_:1})):c("v-if",!0),s.$slots.default?(u(),h("span",{key:1,class:E(w(e).e("inner"))},[I(s.$slots,"default")],2)):c("v-if",!0),s.$slots.icon?I(s.$slots,"icon",{key:2}):c("v-if",!0)],10,W))}});var Z=O(Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const ee=U(Z);const se="/assets/login-5128a910.png",ae={class:"wrapper"},le={class:"flex bg-white login-wrapper shadow-lg"},te=m("img",{src:se,alt:""},null,-1),oe={class:"flex-1 p-20"},ne=m("h3",{class:"text-5xl mb-5 text-center font-semibold font-primary"},"MONITOR",-1),re=m("p",{class:"text-2xl mb-20 text-center text-gray-400"}," A universal front-end monitoring system ",-1),pe=V({__name:"login",setup(f){const v=z(),o=y(!1),e=J({email:"",password:"",nickname:"",password1:""}),l=y("login"),g=y();async function s(){var _;(_=g.value)==null||_.validate(async a=>{var d;if(a)if(l.value==="login"){o.value=!0;const{data:t}=await b("user/login").post({email:e.email,password:e.password});if(o.value=!1,t.value){localStorage.setItem("token",(d=JSON.parse(t.value))==null?void 0:d.token),N.success("登录成功");const k=await b("user/info").get().json();localStorage.setItem("userInfo",JSON.stringify(k.data.value)),v.push("/")}}else{const{error:t}=await b("user/register").post({email:e.email,password:e.password,nickname:e.nickname,password1:e.password,password2:e.password1});console.log("error",t),t.value||(N.success("注册成功！"),l.value="login")}})}return(_,a)=>{const d=A,t=G,k=K,P=ee,S=j,B=R;return u(),h("div",ae,[m("div",le,[te,m("div",oe,[ne,re,n(S,{ref_key:"formInstace",ref:g,model:e,"label-position":"left","label-width":"120px"},{default:r(()=>[l.value==="register"?(u(),p(t,{key:0,prop:"nickname",label:"昵称",rules:[{required:!0,message:"Please input email address",trigger:"blur"}]},{default:r(()=>[n(d,{modelValue:e.nickname,"onUpdate:modelValue":a[0]||(a[0]=i=>e.nickname=i)},null,8,["modelValue"])]),_:1})):c("",!0),n(t,{prop:"email",label:"邮箱",rules:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}]},{default:r(()=>[n(d,{modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=i=>e.email=i)},null,8,["modelValue"])]),_:1}),n(t,{prop:"password",label:"密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:r(()=>[n(d,{type:"password",modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=i=>e.password=i)},null,8,["modelValue"])]),_:1}),l.value==="register"?(u(),p(t,{key:1,prop:"password1",label:"确认密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:r(()=>[n(d,{type:"password",modelValue:e.password1,"onUpdate:modelValue":a[3]||(a[3]=i=>e.password1=i)},null,8,["modelValue"])]),_:1})):c("",!0),n(t,null,{default:r(()=>[T((u(),p(k,{type:"primary",onClick:s},{default:r(()=>[C(x(l.value==="register"?"注册":"登录"),1)]),_:1})),[[B,o.value]]),n(P,{class:"ml-5",type:"info",onClick:a[4]||(a[4]=i=>l.value==="register"?l.value="login":l.value="register")},{default:r(()=>[C(x(l.value==="register"?"去登录":"免费注册"),1)]),_:1})]),_:1})]),_:1},8,["model"])])])])}}});export{pe as default};
