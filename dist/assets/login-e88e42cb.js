import{j as L,k as F,d as b,l as M,m as U,o as r,c as y,g as d,w as o,n as D,u as _,p as O,q as p,s as h,t as V,_ as T,v as R,a as j,r as E,b as m,e as t,f as z,h as x,x as C,i as A,E as I}from"./index-1bb4ca13.js";import{u as P,a as J,E as K,v as G}from"./http-49163270.js";import{a as H,E as Q}from"./el-form-item-bc1937a2.js";const W=L({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:F}}),X={click:c=>c instanceof MouseEvent},Y=["href"],Z=b({name:"ElLink"}),ee=b({...Z,props:W,emits:X,setup(c,{emit:g}){const e=c,s=M("link"),k=U(()=>[s.b(),s.m(e.type),s.is("disabled",e.disabled),s.is("underline",e.underline&&!e.disabled)]);function f(a){e.disabled||g("click",a)}return(a,v)=>(r(),y("a",{class:h(_(k)),href:a.disabled||!a.href?void 0:a.href,onClick:f},[a.icon?(r(),d(_(O),{key:0},{default:o(()=>[(r(),d(D(a.icon)))]),_:1})):p("v-if",!0),a.$slots.default?(r(),y("span",{key:1,class:h(_(s).e("inner"))},[V(a.$slots,"default")],2)):p("v-if",!0),a.$slots.icon?V(a.$slots,"icon",{key:2}):p("v-if",!0)],10,Y))}});var se=T(ee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const ae=R(se);const le="/assets/login-5128a910.png",te={class:"wrapper"},oe={class:"flex bg-white login-wrapper shadow-lg"},ne=m("img",{src:le,alt:""},null,-1),re={class:"flex-1 p-20"},ie=m("h3",{class:"text-5xl mb-5 text-center font-semibold font-primary"},"MONITOR",-1),ue=m("p",{class:"text-2xl mb-20 text-center text-gray-400"}," A universal front-end monitoring system ",-1),ce=b({__name:"login",setup(c){const g=A(),e=j({email:"",password:"",nickname:"",password1:""}),s=E("login"),{isFetching:k,data:f,execute:a}=P("user/login",{immediate:!1}).post({email:e.email,password:e.password}),v=E();async function B(){var w;(w=v.value)==null||w.validate(async l=>{var i;if(l)if(s.value==="login")await a(),f.value&&(localStorage.setItem("token",(i=JSON.parse(f.value))==null?void 0:i.token),I.success("登录成功"),g.push("/"));else{const{error:u}=await P("user/register").post({email:e.email,password:e.password,nickname:e.nickname,password1:e.password,password2:e.password1});u||(I.success("注册成功！"),s.value="login")}})}return(w,l)=>{const i=J,u=Q,N=K,$=ae,S=H,q=G;return r(),y("div",te,[m("div",oe,[ne,m("div",re,[ie,ue,t(S,{ref_key:"formInstace",ref:v,model:e,"label-position":"left","label-width":"120px"},{default:o(()=>[s.value==="register"?(r(),d(u,{key:0,prop:"nickname",label:"昵称",rules:[{required:!0,message:"Please input email address",trigger:"blur"}]},{default:o(()=>[t(i,{modelValue:e.nickname,"onUpdate:modelValue":l[0]||(l[0]=n=>e.nickname=n)},null,8,["modelValue"])]),_:1})):p("",!0),t(u,{prop:"email",label:"邮箱",rules:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}]},{default:o(()=>[t(i,{modelValue:e.email,"onUpdate:modelValue":l[1]||(l[1]=n=>e.email=n)},null,8,["modelValue"])]),_:1}),t(u,{prop:"password",label:"密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:o(()=>[t(i,{type:"password",modelValue:e.password,"onUpdate:modelValue":l[2]||(l[2]=n=>e.password=n)},null,8,["modelValue"])]),_:1}),s.value==="register"?(r(),d(u,{key:1,prop:"password1",label:"确认密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:o(()=>[t(i,{type:"password",modelValue:e.password1,"onUpdate:modelValue":l[3]||(l[3]=n=>e.password1=n)},null,8,["modelValue"])]),_:1})):p("",!0),t(u,null,{default:o(()=>[z((r(),d(N,{type:"primary",onClick:B},{default:o(()=>[x(C(s.value==="register"?"注册":"登录"),1)]),_:1})),[[q,_(k)]]),t($,{class:"ml-5",type:"info",onClick:l[4]||(l[4]=n=>s.value==="register"?s.value="login":s.value="register")},{default:o(()=>[x(C(s.value==="register"?"去登录":"免费注册"),1)]),_:1})]),_:1})]),_:1},8,["model"])])])])}}});export{ce as default};
