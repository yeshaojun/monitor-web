import{d as b,a as y,r as E,g as m,w as o,o as d,e as t,f as V,u as h,h as k,i as x}from"./index-df3372c3.js";import{u as q,c as F,a as I,b as B,E as C,v as N}from"./http-7e532650.js";import{a as P,E as L}from"./el-form-item-99257cb9.js";const D=b({__name:"login",setup(M){const p=x(),e=y({email:"yeshaojun5056@163.com",password:"qq5056"}),{isFetching:c,data:u,execute:_}=q("user/login",{immediate:!1}).post(e),i=E();function f(){var l;(l=i.value)==null||l.validate(async a=>{var s;a&&(await _(),u.value&&(F("token",(s=JSON.parse(u.value))==null?void 0:s.token),I.success("登录成功"),p.push("/")))})}return(l,a)=>{const s=B,r=L,g=C,w=P,v=N;return d(),m(w,{ref_key:"formInstace",ref:i,model:e,"label-width":"120px"},{default:o(()=>[t(r,{prop:"email",label:"Email",rules:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}]},{default:o(()=>[t(s,{modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=n=>e.email=n)},null,8,["modelValue"])]),_:1}),t(r,{prop:"password",label:"password",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:o(()=>[t(s,{type:"password",modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=n=>e.password=n)},null,8,["modelValue"])]),_:1}),t(r,null,{default:o(()=>[V((d(),m(g,{type:"primary",onClick:f},{default:o(()=>[k("登录")]),_:1})),[[v,h(c)]])]),_:1})]),_:1},8,["model"])}}});export{D as default};
