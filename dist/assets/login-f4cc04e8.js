import{n as q,p as B,d as w,q as S,s as $,o as i,c as y,g as d,w as r,v as L,u as v,x as U,l as p,y as b,z as V,_ as D,A as F,r as k,a as M,b as m,e as n,h as O,f as R,j as h,t as E,m as T,E as z}from"./index-24323a28.js";import{u as N,E as A,v as j}from"./request-cd826f62.js";import{a as J,E as K}from"./el-form-item-fe2ee034.js";const G=q({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:B}}),H={click:f=>f instanceof MouseEvent},Q=["href"],W=w({name:"ElLink"}),X=w({...W,props:G,emits:H,setup(f,{emit:c}){const e=f,s=S("link"),g=$(()=>[s.b(),s.m(e.type),s.is("disabled",e.disabled),s.is("underline",e.underline&&!e.disabled)]);function _(a){e.disabled||c("click",a)}return(a,l)=>(i(),y("a",{class:b(v(g)),href:a.disabled||!a.href?void 0:a.href,onClick:_},[a.icon?(i(),d(v(U),{key:0},{default:r(()=>[(i(),d(L(a.icon)))]),_:1})):p("v-if",!0),a.$slots.default?(i(),y("span",{key:1,class:b(v(s).e("inner"))},[V(a.$slots,"default")],2)):p("v-if",!0),a.$slots.icon?V(a.$slots,"icon",{key:2}):p("v-if",!0)],10,Q))}});var Y=D(X,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const Z=F(Y);const ee="/assets/login-5128a910.png",se={class:"wrapper"},ae={class:"flex bg-white login-wrapper shadow-lg"},le=m("img",{src:ee,alt:""},null,-1),te={class:"flex-1 p-20"},oe=m("h3",{class:"text-5xl mb-5 text-center font-semibold font-primary"},"MONITOR",-1),ne=m("p",{class:"text-2xl mb-20 text-center text-gray-400"}," A universal front-end monitoring system ",-1),de=w({__name:"login",setup(f){O();const c=k(!1),e=M({email:"",account:"",password:"",nickName:"",password1:""}),s=k("login"),g=k();async function _(){var a;(a=g.value)==null||a.validate(async l=>{if(l)if(s.value==="login"){c.value=!0;const{data:t,error:u}=await N("auth/login",{method:"post",data:{account:e.account,password:e.password}});c.value=!1,u.value||(localStorage.setItem("token",t.value.access_token),localStorage.setItem("userInfo",JSON.stringify(t.value.user)),window.location.href="/")}else{const{error:t}=await N("auth/register",{method:"post",data:{account:e.account,password:e.password,nickName:e.nickName,email:e.email}});console.log("error",t),t.value||(T.success("注册成功！"),s.value="login")}})}return(a,l)=>{const t=A,u=K,I=z,x=Z,C=J,P=j;return i(),y("div",se,[m("div",ae,[le,m("div",te,[oe,ne,n(C,{ref_key:"formInstace",ref:g,model:e,"label-position":"left","label-width":"120px"},{default:r(()=>[s.value==="register"?(i(),d(u,{key:0,prop:"nickName",label:"昵称",rules:[{required:!0,message:"Please input email address",trigger:"blur"}]},{default:r(()=>[n(t,{modelValue:e.nickName,"onUpdate:modelValue":l[0]||(l[0]=o=>e.nickName=o)},null,8,["modelValue"])]),_:1})):p("",!0),s.value==="register"?(i(),d(u,{key:1,prop:"email",label:"邮件",rules:[{required:!0,message:"Please input email address",trigger:"blur"}]},{default:r(()=>[n(t,{modelValue:e.email,"onUpdate:modelValue":l[1]||(l[1]=o=>e.email=o)},null,8,["modelValue"])]),_:1})):p("",!0),n(u,{prop:"account",label:"账号",rules:[{required:!0,message:"Please input email address",trigger:"blur"}]},{default:r(()=>[n(t,{modelValue:e.account,"onUpdate:modelValue":l[2]||(l[2]=o=>e.account=o)},null,8,["modelValue"])]),_:1}),n(u,{prop:"password",label:"密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:r(()=>[n(t,{type:"password",modelValue:e.password,"onUpdate:modelValue":l[3]||(l[3]=o=>e.password=o)},null,8,["modelValue"])]),_:1}),s.value==="register"?(i(),d(u,{key:2,prop:"password1",label:"确认密码",rules:[{required:!0,message:"Please input password",trigger:"blur"}]},{default:r(()=>[n(t,{type:"password",modelValue:e.password1,"onUpdate:modelValue":l[4]||(l[4]=o=>e.password1=o)},null,8,["modelValue"])]),_:1})):p("",!0),n(u,null,{default:r(()=>[R((i(),d(I,{type:"primary",onClick:_},{default:r(()=>[h(E(s.value==="register"?"注册":"登录"),1)]),_:1})),[[P,c.value]]),n(x,{class:"ml-5",type:"info",onClick:l[5]||(l[5]=o=>s.value==="register"?s.value="login":s.value="register")},{default:r(()=>[h(E(s.value==="register"?"去登录":"免费注册"),1)]),_:1})]),_:1})]),_:1},8,["model"])])])])}}});export{de as default};
